"use strict";(self["webpackChunkwarehouse_manage"]=self["webpackChunkwarehouse_manage"]||[]).push([[818],{2818:function(t,e,o){o.r(e),o.d(e,{default:function(){return D}});var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"manager"},[o("el-dialog",{attrs:{title:"警告",visible:t.confirmDeleteShow},on:{"update:visible":function(e){t.confirmDeleteShow=e}}},[o("span",{staticStyle:{"font-size":"1.4rem"}},[t._v("项目删除后不可恢复! 你确认要删除吗？")]),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.confirmDeleteShow=!1}}},[t._v("取消")]),o("el-button",{attrs:{type:"danger"},on:{click:t.confirm}},[t._v("确认")])],1)]),o("el-dialog",{attrs:{title:"库存管理",visible:t.stockShow,center:"true"},on:{"update:visible":function(e){t.stockShow=e}}},[o("div",{staticStyle:{"font-size":"1.2rem",margin:"auto","text-align":"center"}},[t._v(" "+t._s("stockin"===t.operateType?"入库":"出库")+"数量： "),o("el-input-number",{attrs:{min:1,step:this.factor+1+2*this.factor,"controls-position":"right"},model:{value:t.stockMount,callback:function(e){t.stockMount=e},expression:"stockMount"}})],1),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.stockShow=!1}}},[t._v("取消")]),o("el-button",{attrs:{type:"success"},on:{click:t.confirm}},[t._v("确认")])],1)]),o("el-dialog",{attrs:{title:"add"===t.operateType?"新增项目":"更改项目",visible:t.isShow},on:{"update:visible":function(e){t.isShow=e}}},[o("common-form",{ref:"form",attrs:{formLabel:t.operateFormLabel,form:t.operateForm,inline:!0}}),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.isShow=!1}}},[t._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认")])],1)],1),o("el-dialog",{attrs:{title:"分组命名",visible:t.groupShow,center:"true"},on:{"update:visible":function(e){t.groupShow=e}}},[o("common-form",{ref:"form",attrs:{formLabel:t.editGroupFormLabel,form:t.groupForm,inline:!0}}),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.groupShow=!1}}},[t._v("取消")]),o("el-button",{attrs:{type:"success"},on:{click:t.confirm}},[t._v("确认")])],1)],1),o("div",{staticClass:"manager-header"},[o("div",[o("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"success",size:"medium",icon:"el-icon-plus"},on:{click:t.addItemDialog}},[t._v("新增项目")]),o("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"medium",icon:"el-icon-paperclip"},on:{click:t.groupEditDialog}},[t._v("分组命名")])],1),o("common-form",{ref:"form",attrs:{formLabel:t.formLabel,form:t.searchForm,inline:!0}},[o("el-button",{attrs:{type:"primary"},on:{click:t.getList}},[t._v("搜索")])],1)],1),o("common-table",{attrs:{tableData:t.tableData,tableLabel:t.tableLabel,config:t.config},on:{changePage:function(e){return t.getList()},edit:t.editItemDialog,delete:t.deleteDialog,stockin:t.stockinDialog,stockout:t.stockoutDialog}})],1)},r=[],s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form",{ref:"form",attrs:{"label-width":"100px",model:t.localForm,inline:t.inline}},[t._l(t.formLabel,(function(e){return o("el-form-item",{key:e.label,attrs:{label:e.label}},["input"===e.type?o("el-input",{attrs:{placeholder:"请输入"+e.label},model:{value:t.localForm[e.model],callback:function(o){t.$set(t.localForm,e.model,o)},expression:"localForm[item.model]"}}):t._e(),"select"===e.type?o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.localForm[e.model],callback:function(o){t.$set(t.localForm,e.model,o)},expression:"localForm[item.model]"}},t._l(e.opts,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e()],1)})),o("el-form-item",[t._t("default")],2)],2)},i=[],l={name:"commonForm",props:{formLabel:Array,form:Object,inline:Boolean},data(){return{localForm:this.form}},watch:{form:function(t){this.localForm=t}}},n=l,c=o(1001),u=(0,c.Z)(n,s,i,!1,null,null,null),h=u.exports,p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"common-table"},[o("el-card",{staticClass:"table-view"},[o("el-table",{staticClass:"table-body-view",attrs:{data:t.localTableData,height:"60vh",stripe:"",fit:"","row-key":""}},[t._l(t.tableLabel,(function(e){return o("el-table-column",{key:e.prop,attrs:{"show-overflow-tooltip":"",label:e.label,width:e.width?e.width:125,"header-align":"center",align:"center",sortable:"true"},scopedSlots:t._u([{key:"default",fn:function(a){return[o("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(a.row[e.prop]))])]}}],null,!0)})})),o("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.handleEdit(e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.row)}}},[t._v("删除")]),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleStockin(e.row)}}},[t._v("入库")]),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleStockOut(e.row)}}},[t._v("出库")])]}}])})],2),o("el-pagination",{staticClass:"pager",attrs:{layout:"prev, pager, next",total:t.localConfig.total,"current-page":t.localConfig.page,"page-size":20},on:{"current-page":t.changePage}})],1)],1)},m=[],g={name:"CommonTable",data(){return{localConfig:this.config,localTableData:this.tableData}},props:{tableData:Array,tableLabel:Array,config:Object},methods:{handleEdit(t){this.$emit("edit",t)},handleDelete(t){this.$emit("delete",t)},handleStockin(t){this.$emit("stockin",t)},handleStockOut(t){this.$emit("stockout",t)},changePage(t){this.$emit("changePage",t)}},watch:{tableData:function(t){this.localTableData=t}}},d=g,b=(0,c.Z)(d,p,m,!1,null,null,null),f=b.exports,w=o(7303),k={name:"warehouse",components:{CommonForm:h,CommonTable:f},data(){return{operateType:"add",operateRow:[],stockMount:1,isShow:!1,confirmDeleteShow:!1,stockShow:!1,groupShow:!1,editGroupFormLabel:[{model:"group1",label:"组一",type:"input"},{model:"group2",label:"组二",type:"input"},{model:"group3",label:"组三",type:"input"},{model:"group4",label:"组四",type:"input"}],operateForm:{name:"",number:"",pcs:"",group:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""},tableLabel:[{prop:"name",label:"项目名称",width:"250"},{prop:"number",label:"存量",width:"150"},{prop:"pcs",label:"单位",width:"150"},{prop:"group",label:"分组",width:"250"}],groupForm:{group1:"X",group2:"Y",group3:"Z",group4:"U"},tableData:[{name:"物品1",number:50,pcs:"个",group:"组1"}],config:{page:1,total:20}}},methods:{confirm(){"add"===this.operateType?this.create():"edit"===this.operateType?this.edit(this.operateRow):"delete"===this.operateType?this.remove(this.operateRow):"stockin"===this.operateType?this.stockin(this.operateRow,this.stockMountInt):"stockout"===this.operateType?this.stockout(this.operateRow,this.stockMountInt):"groupEdit"===this.operateType&&this.editGroupList(),this.isShow=!1,this.groupShow=!1,this.stockShow=!1,this.confirmDeleteShow=!1},addItemDialog(){this.isShow=!0,this.operateType="add"},groupEditDialog(){this.groupShow=!0,this.operateType="groupEdit"},stockinDialog(t){this.operateRow=t,this.operateType="stockin",this.stockShow=!0},stockoutDialog(t){this.operateRow=t,this.operateType="stockout",this.stockShow=!0},editItemDialog(t){this.operateRow=t,this.operateForm={name:this.operateRow.name,number:this.operateRow.number,pcs:this.operateRow.pcs,group:this.operateRow.group},this.isShow=!0,this.operateType="edit"},deleteDialog(t){this.operateRow=t,this.confirmDeleteShow=!0,this.operateType="delete"},create(){(0,w.fC)(this.operateForm).then((t=>{const{code:e,data:o}=t.data;2e4===e?(this.$message.success("添加成功！"),this.tableData=o.tableData):20001===e?this.$message.warning("项目已存在!"):this.$message.error("添加失败！")})).catch((t=>{this.$message.error("添加失败！"),console.log(t,"错误")}))},edit(t){this.operateForm.oldName=t.name,(0,w.$G)(this.operateForm).then((t=>{const{code:e,data:o}=t.data;2e4===e?(this.$message.success("修改成功！"),this.tableData=o.tableData):20001===e?this.$message.warning("项目不存在!"):this.$message.error("修改失败！")})).catch((t=>{this.$message.error("修改失败！"),console.log(t,"错误")}))},remove(t){(0,w.wz)({name:t.name}).then((t=>{const{code:e,data:o}=t.data;2e4===e?(this.$message.success("删除成功！"),this.tableData=o.tableData):20001===e?this.$message.warning("项目不存在!"):this.$message.error("删除失败！")})).catch((t=>{this.$message.error("删除失败！"),console.log(t,"错误")}))},stockin(t,e=1){(0,w.QG)({name:t.name,mount:e}).then((t=>{const{code:e,data:o}=t.data;2e4===e?(this.$message.success("入库成功！"),this.tableData=o.tableData):20001===e?(this.$message.warning("项目不存在! "),this.tableData=o.tableData):this.$message.error("入库失败！")})).catch((t=>{this.$message.error("入库失败！"),console.log(t,"错误")}))},stockout(t,e=1){(0,w.tR)({name:t.name,mount:e}).then((t=>{const{code:e,data:o}=t.data;2e4===e?(this.$message.success("出库成功！"),this.tableData=o.tableData):20001===e?this.$message.warning("项目不存在 "):20002===e?this.$message.warning("库存不足!"):this.$message.error("出库失败！")})).catch((t=>{this.$message.error("出库失败！"),console.log(t,"错误")}))},editGroupList(){(0,w.Co)(this.groupForm).then((t=>{const{code:e,data:o}=t.data;2e4===e?(this.groupForm=o,this.$message.success("分组命名修改成功!"),(0,w.Yu)().then((t=>{const{data:e,code:o}=t.data;2e4===o&&(this.tableData=e.tableData)}))):this.$message.warning("分组命名修改失败!")})).catch((t=>{this.$message.warning("分组命名修改失败!")}))}},mounted(){(0,w.Yu)().then((t=>{const{data:e,code:o}=t.data;2e4===o&&(this.tableData=e.tableData)})),(0,w.hI)().then((t=>{const{data:e,code:o}=t.data;2e4===o&&(this.groupForm=e.groupData)}))},computed:{factor(){return Math.ceil(this.stockMount/50)-1},stockMountInt(){return"number"!==typeof this.stockMount?0:Math.floor(this.stockMount)},groupLabel(){return this.$store.state.groups.groupsInfo},operateFormLabel(){return[{model:"name",label:"项目名称",type:"input"},{model:"number",label:"数量",type:"input"},{model:"pcs",label:"计量单位",type:"input"},{model:"group",label:"分组",type:"select",opts:[{label:this.groupLabel[0].group,value:this.groupLabel[0].group},{label:this.groupLabel[1].group,value:this.groupLabel[1].group},{label:this.groupLabel[2].group,value:this.groupLabel[2].group},{label:this.groupLabel[3].group,value:this.groupLabel[3].group}]}]}}},v=k,y=(0,c.Z)(v,a,r,!1,null,"c10ce250",null),D=y.exports},7303:function(t,e,o){o.d(e,{fC:function(){return g},wz:function(){return b},Yu:function(){return m},ex:function(){return p},hI:function(){return u},r7:function(){return c},QG:function(){return f},tR:function(){return w},Co:function(){return h},$G:function(){return d}});var a=o(6166),r=o.n(a),s={baseUrl:{dev:"/api/",pro:""}};const i=s.baseUrl.pro;class l{constructor(t){this.baseUrl=t}getInsideConfig(){const t={baseUrl:this.baseUrl};return t}interceptors(t){t.interceptors.request.use((t=>t),(t=>Promise.reject(t))),t.interceptors.response.use((t=>t),(t=>Promise.reject(t)))}request(t){const e=r().create();return t={...this.getInsideConfig(),...t},this.interceptors(e),e(t)}}var n=new l(i);const c=t=>n.request({url:"/permission/getMenu",method:"post",data:t,headers:{Authorization:localStorage.getItem("very")}}),u=()=>n.request({url:"/groups/getGroupList",headers:{Authorization:localStorage.getItem("very")}}),h=t=>n.request({url:"/groups/submitGroupList",method:"post",data:t,headers:{Authorization:localStorage.getItem("very")}}),p=()=>n.request({url:"/groups/getGroup",headers:{Authorization:localStorage.getItem("very")}}),m=()=>n.request({url:"/home/getData",headers:{Authorization:localStorage.getItem("very")}}),g=t=>n.request({url:"/warehouse/createItem",method:"post",data:t,headers:{Authorization:localStorage.getItem("very")}}),d=t=>n.request({url:"/warehouse/updateItem",method:"post",data:t,headers:{Authorization:localStorage.getItem("very")}}),b=t=>n.request({url:"/warehouse/deleteItem",method:"post",data:t,headers:{Authorization:localStorage.getItem("very")}}),f=t=>n.request({url:"/warehouse/stock-in",method:"post",data:t,headers:{Authorization:localStorage.getItem("very")}}),w=t=>n.request({url:"/warehouse/stock-out",method:"post",data:t,headers:{Authorization:localStorage.getItem("very")}})}}]);
//# sourceMappingURL=818.2e7d1531.js.map