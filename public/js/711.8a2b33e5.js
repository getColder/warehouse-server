"use strict";(self["webpackChunkwarehouse_manage"]=self["webpackChunkwarehouse_manage"]||[]).push([[711],{711:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manager"},[a("el-dialog",{attrs:{title:"add"===e.operateType?"新增项目":"更改项目",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t}}},[a("common-form",{ref:"form",attrs:{formLabel:e.operateFormLabel,form:e.operateForm,inline:!0}}),a("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isShow=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")])],1)],1),a("div",{staticClass:"manager-header"},[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"success",size:"mini"},on:{click:e.addItemDialog}},[e._v("新增项目")]),a("common-form",{ref:"form",attrs:{formLabel:e.formLabel,form:e.searchForm,inline:!0}},[a("el-button",{attrs:{type:"primary"},on:{click:e.getList}},[e._v("搜索")])],1)],1),a("common-table",{attrs:{tableData:e.tableData,tableLabel:e.tableLabel,config:e.config},on:{changePage:function(t){return e.getList()},edit:e.editItemDialog,delete:e.remove,stockin:e.stockin,stockout:e.stockout}})],1)},r=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{"label-width":"100px",model:e.form,inline:e.inline}},[e._l(e.formLabel,(function(t){return a("el-form-item",{key:t.label,attrs:{label:t.label}},["input"===t.type?a("el-input",{attrs:{placeholder:"请输入"+t.label},model:{value:e.form[t.model],callback:function(a){e.$set(e.form,t.model,a)},expression:"form[item.model]"}}):e._e(),"select"===t.type?a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form[t.model],callback:function(a){e.$set(e.form,t.model,a)},expression:"form[item.model]"}},e._l(t.opts,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1)})),a("el-form-item",[e._t("default")],2)],2)},n=[],l={name:"commonForm",props:{formLabel:Array,form:Object,inline:Boolean},data(){return{}}},i=l,c=a(1001),m=(0,c.Z)(i,s,n,!1,null,null,null),u=m.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-table"},[a("el-card",{staticClass:"table-view"},[a("el-table",{staticClass:"table-body-view",attrs:{data:e.tableData,height:"90%",stripe:""}},[e._l(e.tableLabel,(function(t){return a("el-table-column",{key:t.prop,attrs:{"show-overflow-tooltip":"",label:t.label,width:t.width?t.width:125,"header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(o.row[t.prop]))])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleStockin(t.row)}}},[e._v("入库")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleStockOut(t.row)}}},[e._v("出库")])]}}])})],2),a("el-pagination",{staticClass:"pager",attrs:{layout:"prev, pager, next",total:e.config.total,"current-page":e.config.page,"page-size":20},on:{"update:currentPage":function(t){return e.$set(e.config,"page",t)},"update:current-page":function(t){return e.$set(e.config,"page",t)},"current-page":e.changePage}})],1)],1)},p=[],d={name:"CommonTable",data(){return{rowForOperate:[]}},props:{tableData:Array,tableLabel:Array,config:Object},methods:{handleEdit(e){this.rowForOperate=e,this.$emit("edit",this.rowForOperate)},handleDelete(e){this.$emit("delete",e)},handleStockin(e){this.$emit("stockin",e)},handleStockOut(e){this.$emit("stockout",e)},changePage(e){this.$emit("changePage",e)}}},g=d,f=(0,c.Z)(g,h,p,!1,null,null,null),b=f.exports,w=a(7303),y={name:"warehouse",components:{CommonForm:u,CommonTable:b},data(){return{operateType:"add",operateRow:[],isShow:!1,operateFormLabel:[{model:"name",label:"项目名称",type:"input"},{model:"number",label:"数量",type:"input"},{model:"pcs",label:"计量单位",type:"input"},{model:"group",label:"分组",type:"select",opts:[{label:"分组1",value:"g55"},{label:"分组2",value:"g2"}]}],operateForm:{name:"",number:"",pcs:"",group:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""},tableLabel:[{prop:"item",label:"项目名称",width:"250"},{prop:"number",label:"存量",width:"150"},{prop:"pcs",label:"单位",width:"150"},{prop:"group",label:"分组",width:"250"}],tableData:Array(40).fill({item:"物品1",number:"5",pcs:"个",group:"分组1"}),config:{page:1,total:20}}},methods:{confirm(){"add"===this.operateType?this.create():"edit"===this.operateType&&this.edit(this.operateRow.item)},addItemDialog(){this.isShow=!0,this.operateType="add"},editItemDialog(e){this.operateRow=e,this.isShow=!0,this.operateType="edit"},create(){(0,w.fC)(this.operateForm).then((e=>{const{code:t,data:a}=e.data;2e4===t?this.$message.success("添加成功！"):20001===t?this.$message.warning("项目已存在!"):this.$message.error("添加失败！")})).catch((e=>{this.$message.error("添加失败！"),console.log(e,"错误")}))},edit(e){this.operateForm.oldName=e,(0,w.$G)(this.operateForm).then((e=>{const{code:t,data:a}=e.data;2e4===t?this.$message.success("修改成功！"):20001===t?this.$message.warning("项目不存在!"):this.$message.error("修改失败！")})).catch((e=>{this.$message.error("修改失败！"),console.log(e,"错误")}))},remove(e){this.operateRow=e,(0,w.wz)({name:this.operateRow.item}).then((e=>{const{code:t,data:a}=e.data;2e4===t?this.$message.success("删除成功！"):20001===t?this.$message.warning("项目不存在!"):this.$message.error("删除失败！")})).catch((e=>{this.$message.error("删除失败！"),console.log(e,"错误")}))},stockin(e,t=1){this.operateRow=e,(0,w.QG)({name:this.operateRow.item,mount:t}).then((e=>{const{code:t,data:a}=e.data;2e4===t?this.$message.success("入库成功！"):20001===t?this.$message.warning("项目不存在! "):this.$message.error("入库失败！")})).catch((e=>{this.$message.error("入库失败！"),console.log(e,"错误")}))},stockout(e,t=1){this.operateRow=e,(0,w.QG)({name:this.operateRow.item,mount:t}).then((e=>{const{code:t,data:a}=e.data;2e4===t?this.$message.success("出库成功！"):20001===t?this.$message.warning("出库失败！库存不足！ "):20002===t?this.$message.warning("库存不足!"):this.$message.error("出库失败！")})).catch((e=>{this.$message.error("出库失败！"),console.log(e,"错误")}))}}},v=y,$=(0,c.Z)(v,o,r,!1,null,null,null),k=$.exports},7303:function(e,t,a){a.d(t,{fC:function(){return u},wz:function(){return p},Yu:function(){return m},r7:function(){return c},QG:function(){return d},$G:function(){return h}});var o=a(6166),r=a.n(o),s={baseUrl:{dev:"/api/",pro:""}};const n=s.baseUrl.pro;class l{constructor(e){this.baseUrl=e}getInsideConfig(){const e={baseUrl:this.baseUrl};return e}interceptors(e){e.interceptors.request.use((e=>e),(e=>Promise.reject(e))),e.interceptors.response.use((e=>e),(e=>Promise.reject(e)))}request(e){const t=r().create();return e={...this.getInsideConfig(),...e},this.interceptors(t),t(e)}}var i=new l(n);const c=e=>i.request({url:"/permission/getMenu",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}}),m=()=>i.request({url:"/home/getData",headers:{Authorization:localStorage.getItem("very")}}),u=e=>i.request({url:"/warehouse/createItem",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}}),h=e=>i.request({url:"/warehouse/updateItem",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}}),p=e=>i.request({url:"/warehouse/deleteItem",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}}),d=e=>i.request({url:"/warehouse/stock-in",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}})}}]);
//# sourceMappingURL=711.8a2b33e5.js.map