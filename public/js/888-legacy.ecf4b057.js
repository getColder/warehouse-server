(self["webpackChunkwarehouse_manage"]=self["webpackChunkwarehouse_manage"]||[]).push([[888],{6888:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return x}});var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"manager"},[o("el-dialog",{attrs:{visible:t.confirmDeleteShow,center:"true"},on:{"update:visible":function(e){t.confirmDeleteShow=e}}},[o("div",{attrs:{slot:"title"},slot:"title"},[t._v("警告")]),o("span",{staticStyle:{"font-size":"1.4rem"}},[t._v("项目删除后不可恢复! 你确认要删除吗？")]),o("transition",{attrs:{name:"el-zoom-in-top"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.editNoteShow,expression:"editNoteShow"}],staticClass:"transition-box"},[o("el-input",{attrs:{type:"textarea",placeholder:"此处添加备注..."},model:{value:t.operateForm.note,callback:function(e){t.$set(t.operateForm,"note",e)},expression:"operateForm.note"}})],1)]),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{disabled:t.submitting,circle:"",icon:"el-icon-edit"},on:{click:function(e){t.editNoteShow=!t.editNoteShow}}}),o("div",[o("el-button",{attrs:{disabled:t.submitting},on:{click:t.cancel}},[t._v("取消")]),o("el-button",{attrs:{type:"danger",disabled:t.submitting},on:{click:t.confirm}},[t._v("确认")])],1)],1)],1),o("el-dialog",{attrs:{title:"库存管理",visible:t.stockShow,center:"true"},on:{"update:visible":function(e){t.stockShow=e}}},[o("div",{staticStyle:{"font-size":"1.2rem",margin:"auto","text-align":"center"}},[t._v(" "+t._s("stockin"===t.operateType?"入库":"出库")+"数量： "),o("el-input-number",{attrs:{min:1,step:this.factor+1+2*this.factor,"controls-position":"right"},model:{value:t.stockMount,callback:function(e){t.stockMount=e},expression:"stockMount"}}),o("transition",{attrs:{name:"el-zoom-in-top"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.editNoteShow,expression:"editNoteShow"}],staticClass:"transition-box"},[o("el-input",{attrs:{type:"textarea",placeholder:"此处添加备注..."},model:{value:t.operateForm.note,callback:function(e){t.$set(t.operateForm,"note",e)},expression:"operateForm.note"}})],1)])],1),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{disabled:t.submitting,circle:"",icon:"el-icon-edit"},on:{click:function(e){t.editNoteShow=!t.editNoteShow}}}),o("div",[o("el-button",{attrs:{disabled:t.submitting},on:{click:t.cancel}},[t._v("取消")]),o("el-button",{attrs:{type:"primary",disabled:t.submitting},on:{click:t.confirm}},[t._v("确认")])],1)],1)]),o("el-dialog",{attrs:{title:"add"===t.operateType?"新增项目":"更改项目",visible:t.isShow,center:"true"},on:{"update:visible":function(e){t.isShow=e}}},[o("common-form",{ref:"form",attrs:{formLabel:t.operateFormLabel,form:t.operateForm,inline:!0}}),o("transition",{attrs:{name:"el-zoom-in-top"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.editNoteShow,expression:"editNoteShow"}],staticClass:"transition-box"},[o("el-input",{attrs:{type:"textarea",placeholder:"此处添加备注..."},model:{value:t.operateForm.note,callback:function(e){t.$set(t.operateForm,"note",e)},expression:"operateForm.note"}})],1)]),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{disabled:t.submitting,circle:"",icon:"el-icon-edit"},on:{click:function(e){t.editNoteShow=!t.editNoteShow}}}),o("div",[o("el-button",{attrs:{disabled:t.submitting},on:{click:t.cancel}},[t._v("取消")]),o("el-button",{attrs:{type:"primary",disabled:t.submitting},on:{click:t.confirm}},[t._v("确认")])],1)],1)],1),o("el-dialog",{attrs:{title:"分组命名",visible:t.groupShow,center:"true"},on:{"update:visible":function(e){t.groupShow=e}}},[o("common-form",{ref:"form",attrs:{formLabel:t.editGroupFormLabel,form:t.groupForm,inline:!0}}),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("div",[o("div",[o("div",[o("el-button",{attrs:{disabled:t.submitting},on:{click:t.cancel}},[t._v("取消")]),o("el-button",{attrs:{type:"primary",disabled:t.submitting},on:{click:t.confirm}},[t._v("确认")])],1)])])])],1),o("div",{staticClass:"manager-header"},[o("div",{staticStyle:{"margin-bottom":"1rem"}},[o("el-button",{attrs:{disabled:t.submitting,type:"success",size:"medium",icon:"el-icon-plus"},on:{click:t.addItemDialog}},[t._v("新增项目")]),o("el-button",{attrs:{disabled:t.submitting,type:"primary",size:"medium",icon:"el-icon-paperclip"},on:{click:t.groupEditDialog}},[t._v("分组命名")])],1),o("common-form",{ref:"form",attrs:{formLabel:t.formLabel,form:t.searchForm,inline:!0}},[o("el-button",{attrs:{type:"primary"},on:{click:t.getList}},[t._v("搜索")])],1)],1),o("div",{staticClass:"hidden-xs-only"},[o("common-table",{directives:[{name:"loading",rawName:"v-loading",value:t.submitting,expression:"submitting"}],attrs:{tableData:t.tableData.filter((function(e){return t.filterRegx.test(e.name)})),tableLabel:t.tableLabel,config:t.config},on:{changePage:function(e){return t.getList()},edit:t.editItemDialog,delete:t.deleteDialog,stockin:t.stockinDialog,stockout:t.stockoutDialog}})],1),o("div",{staticClass:"hidden-sm-and-up"},[o("xs-table",{directives:[{name:"loading",rawName:"v-loading",value:t.submitting,expression:"submitting"}],attrs:{tableData:t.tableData.filter((function(e){return t.filterRegx.test(e.name)})),tableLabel:t.tableLabel,config:t.config},on:{changePage:function(e){return t.getList()},edit:t.editItemDialog,delete:t.deleteDialog,stockin:t.stockinDialog,stockout:t.stockoutDialog}})],1)],1)},a=[],i=(o(8309),o(4603),o(8450),o(4916),o(8386),o(9714),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form",{ref:"form",attrs:{"label-width":"100px",model:t.localForm,inline:t.inline}},[t._l(t.formLabel,(function(e){return o("el-form-item",{key:e.label,attrs:{label:e.label}},["input"===e.type?o("el-input",{attrs:{placeholder:"请输入"+e.label},model:{value:t.localForm[e.model],callback:function(o){t.$set(t.localForm,e.model,o)},expression:"localForm[item.model]"}}):t._e(),"select"===e.type?o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.localForm[e.model],callback:function(o){t.$set(t.localForm,e.model,o)},expression:"localForm[item.model]"}},t._l(e.opts,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e()],1)})),o("el-form-item",[t._t("default")],2)],2)}),r=[],s={name:"commonForm",props:{formLabel:Array,form:Object,inline:Boolean},data:function(){return{localForm:this.form}},watch:{form:function(t){this.localForm=t}}},l=s,c=o(1001),u=(0,c.Z)(l,i,r,!1,null,null,null),m=u.exports,p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"common-table"},[o("el-card",{staticClass:"table-view"},[o("el-table",{staticClass:"table-body-view",attrs:{data:t.localTableData,height:"60vh",stripe:"",fit:"","row-key":""}},[t._l(t.tableLabel,(function(e){return o("el-table-column",{key:e.prop,attrs:{"show-overflow-tooltip":"",label:e.label,width:e.width?e.width:125,"header-align":"center",align:"center",sortable:"true"},scopedSlots:t._u([{key:"default",fn:function(n){return[o("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(n.row[e.prop]))])]}}],null,!0)})})),o("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.handleEdit(e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.row)}}},[t._v("删除")]),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleStockin(e.row)}}},[t._v("入库")]),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleStockOut(e.row)}}},[t._v("出库")])]}}])})],2),o("el-pagination",{staticClass:"pager",attrs:{layout:"prev, pager, next",total:t.localConfig.total,"current-page":t.localConfig.page,"page-size":20},on:{"current-page":t.changePage}})],1)],1)},d=[],h={name:"CommonTable",data:function(){return{localConfig:this.config,localTableData:this.tableData}},props:{tableData:Array,tableLabel:Array,config:Object},methods:{handleEdit:function(t){this.$emit("edit",t)},handleDelete:function(t){this.$emit("delete",t)},handleStockin:function(t){this.$emit("stockin",t)},handleStockOut:function(t){this.$emit("stockout",t)},changePage:function(t){this.$emit("changePage",t)}},watch:{tableData:function(t){this.localTableData=t}}},f=h,g=(0,c.Z)(f,p,d,!1,null,null,null),b=g.exports,w=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"xs-table"},[o("el-card",{staticClass:"table-view"},[o("el-table",{staticClass:"table-body-view",attrs:{data:t.localTableData,height:"60vh",stripe:"",fit:"","row-key":""}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.tableLabel,(function(n){return o("el-form",{key:n.prop,attrs:{"label-position":"left",inline:""}},[o("el-form-item",{staticClass:"info-expand",attrs:{label:n.label}},[o("span",[t._v(" "+t._s(e.row[n.prop]))])])],1)}))}}])}),o("el-table-column",{attrs:{label:"项目名称",prop:"name"}}),o("el-table-column",{attrs:{label:"操作","header-align":"center",align:"left","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"item-options"},[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.handleEdit(e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.row)}}},[t._v("删除")]),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleStockin(e.row)}}},[t._v("入库")]),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleStockOut(e.row)}}},[t._v("出库")])],1)]}}])})],1),o("el-pagination",{staticClass:"pager",attrs:{layout:"prev, pager, next",total:t.localConfig.total,"current-page":t.localConfig.page,"page-size":20},on:{"current-page":t.changePage}})],1)],1)},v=[],k={name:"XsTable",data:function(){return{localConfig:this.config,localTableData:this.tableData}},props:{tableData:Array,tableLabel:Array,config:Object},methods:{handleEdit:function(t){this.$emit("edit",t)},handleDelete:function(t){this.$emit("delete",t)},handleStockin:function(t){this.$emit("stockin",t)},handleStockOut:function(t){this.$emit("stockout",t)},changePage:function(t){this.$emit("changePage",t)}},watch:{tableData:function(t){this.localTableData=t}}},y=k,D=(0,c.Z)(y,w,v,!1,null,"2083a8f0",null),$=D.exports,S=o(609),C={name:"warehouse",components:{CommonForm:m,CommonTable:b,XsTable:$},data:function(){return{operateType:"add",operateRow:[],stockMount:1,isShow:!1,confirmDeleteShow:!1,stockShow:!1,groupShow:!1,editNoteShow:!1,editGroupFormLabel:[{model:"group1",label:"组一",type:"input"},{model:"group2",label:"组二",type:"input"},{model:"group3",label:"组三",type:"input"},{model:"group4",label:"组四",type:"input"}],operateForm:{name:"",number:"",pcs:"",group:"",note:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""},tableLabel:[{prop:"name",label:"项目名称",width:"250"},{prop:"number",label:"存量",width:"150"},{prop:"pcs",label:"单位",width:"150"},{prop:"group",label:"分组",width:"250"}],groupForm:{group1:"X",group2:"Y",group3:"Z",group4:"U"},tableData:[{name:"物品1",number:50,pcs:"个",group:"组1"}],config:{page:1,total:20}}},methods:{confirm:function(){"add"===this.operateType?this.create():"edit"===this.operateType?this.edit(this.operateRow):"delete"===this.operateType?this.remove(this.operateRow):"stockin"===this.operateType?this.stockin(this.operateRow,this.stockMountInt):"stockout"===this.operateType?this.stockout(this.operateRow,this.stockMountInt):"groupEdit"===this.operateType&&this.editGroupList(),this.$store.commit("submit"),this.isShow=!1,this.groupShow=!1,this.stockShow=!1,this.confirmDeleteShow=!1,this.editNoteShow=!1},cancel:function(){this.editNoteShow=!1,this.stockShow=!1,this.isShow=!1,this.groupShow=!1,this.confirmDeleteShow=!1},addItemDialog:function(){this.operateForm.note="",this.isShow=!0,this.operateType="add"},groupEditDialog:function(){this.groupShow=!0,this.operateType="groupEdit"},stockinDialog:function(t){this.operateForm.note="",this.operateRow=t,this.operateType="stockin",this.stockShow=!0},stockoutDialog:function(t){this.operateForm.note="",this.operateRow=t,this.operateType="stockout",this.stockShow=!0},editItemDialog:function(t){this.operateForm.note="",this.operateRow=t,this.operateForm={name:this.operateRow.name,number:this.operateRow.number,pcs:this.operateRow.pcs,group:this.operateRow.group,note:this.operateForm.note},this.isShow=!0,this.operateType="edit"},deleteDialog:function(t){this.operateForm.note="",this.operateRow=t,this.confirmDeleteShow=!0,this.operateType="delete"},create:function(){var t=this;(0,S.fC)(this.operateForm).then((function(e){var o=e.data,n=o.code,a=o.data;2e4===n?(t.$message.success("添加成功！"),t.tableData=a.tableData):20001===n?t.$message.warning("项目已存在!"):t.$message.error("添加失败！"),t.$store.commit("finish")})).catch((function(e){t.$store.commit("finish"),t.$message.error("添加失败！"),console.log(e,"错误")}))},edit:function(t){var e=this;this.operateForm.oldName=t.name,(0,S.$G)(this.operateForm).then((function(t){var o=t.data,n=o.code,a=o.data;2e4===n?(e.$message.success("修改成功！"),e.tableData=a.tableData):20001===n?e.$message.warning("项目不存在!"):e.$message.error("修改失败！"),e.$store.commit("finish")})).catch((function(t){e.$store.commit("finish"),e.$message.error("修改失败！"),console.log(t,"错误")}))},remove:function(t){var e=this,o=this.operateForm.note;(0,S.wz)({name:t.name,note:o}).then((function(t){var o=t.data,n=o.code,a=o.data;2e4===n?(e.$message.success("删除成功！"),e.tableData=a.tableData):20001===n?e.$message.warning("项目不存在!"):e.$message.error("删除失败！"),e.$store.commit("finish")})).catch((function(t){e.$store.commit("finish"),e.$message.error("删除失败！"),console.log(t,"错误")}))},stockin:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.operateForm.note;(0,S.QG)({name:t.name,mount:o,note:n}).then((function(t){var o=t.data,n=o.code,a=o.data;2e4===n?(e.$message.success("入库成功！"),e.tableData=a.tableData):20001===n?(e.$message.warning("项目不存在! "),e.tableData=a.tableData):e.$message.error("入库失败！"),e.$store.commit("finish")})).catch((function(t){e.$store.commit("finish"),e.$message.error("入库失败！"),console.log(t,"错误")}))},stockout:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.operateForm.note;(0,S.tR)({name:t.name,mount:o,note:n}).then((function(t){var o=t.data,n=o.code,a=o.data;2e4===n?(e.$message.success("出库成功！"),e.tableData=a.tableData):20001===n?e.$message.warning("项目不存在 "):20002===n?e.$message.warning("库存不足!"):e.$message.error("出库失败！"),e.$store.commit("finish")})).catch((function(t){e.$store.commit("finish"),e.$message.error("出库失败！"),console.log(t,"错误")}))},editGroupList:function(){var t=this;(0,S.Co)(this.groupForm).then((function(e){var o=e.data,n=o.code,a=o.data;2e4===n?(t.groupForm=a,t.$message.success("分组命名修改成功!"),(0,S.Yu)().then((function(e){var o=e.data,n=o.data,a=o.code;2e4===a&&(t.tableData=n.tableData)}))):t.$message.warning("分组命名修改失败!"),t.$store.commit("finish")})).catch((function(e){t.$store.commit("finish"),t.$message.warning("分组命名修改失败!")}))}},mounted:function(){var t=this;(0,S.Yu)().then((function(e){var o=e.data,n=o.data,a=o.code;2e4===a&&(t.tableData=n.tableData)})),(0,S.hI)().then((function(e){var o=e.data,n=o.data,a=o.code;2e4===a&&(t.groupForm=n.groupData)}))},computed:{factor:function(){return Math.ceil(this.stockMount/50)-1},stockMountInt:function(){return"number"!==typeof this.stockMount?0:Math.floor(this.stockMount)},groupLabel:function(){return this.$store.state.groups.groupsInfo},operateFormLabel:function(){return[{model:"name",label:"项目名称",type:"input"},{model:"number",label:"数量",type:"input"},{model:"pcs",label:"计量单位",type:"input"},{model:"group",label:"分组",type:"select",opts:[{label:this.groupLabel[0].group,value:this.groupLabel[0].group},{label:this.groupLabel[1].group,value:this.groupLabel[1].group},{label:this.groupLabel[2].group,value:this.groupLabel[2].group},{label:this.groupLabel[3].group,value:this.groupLabel[3].group}]}]},submitting:function(){return this.$store.state.form.submitting},filterRegx:function(){return new RegExp("".concat(""===this.searchForm.keyword?".":this.searchForm.keyword),"gi")}}},F=C,_=(0,c.Z)(F,n,a,!1,null,"958c14bc",null),x=_.exports},9337:function(t,e,o){var n=o(2109),a=o(9781),i=o(3887),r=o(5656),s=o(1236),l=o(6135);n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,o,n=r(t),a=s.f,c=i(n),u={},m=0;while(c.length>m)o=a(n,e=c[m++]),void 0!==o&&l(u,e,o);return u}})},609:function(t,e,o){"use strict";o.d(e,{fC:function(){return w},wz:function(){return k},Yu:function(){return b},ex:function(){return g},hI:function(){return h},r7:function(){return d},tM:function(){return $},g5:function(){return S},QG:function(){return y},tR:function(){return D},Co:function(){return f},$G:function(){return v}});var n=o(3019);o(1703);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}o(1539);var s=o(6166),l=o.n(s),c={baseUrl:{dev:"/api/",pro:""}},u=c.baseUrl.pro,m=function(){function t(e){a(this,t),this.baseUrl=e}return r(t,[{key:"getInsideConfig",value:function(){var t={baseUrl:this.baseUrl};return t}},{key:"interceptors",value:function(t){t.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),t.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)}))}},{key:"request",value:function(t){var e=l().create();return t=(0,n.Z)((0,n.Z)({},this.getInsideConfig()),t),this.interceptors(e),e(t)}}]),t}(),p=new m(u),d=function(t){return p.request({url:"/permission/getMenu",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},h=function(){return p.request({url:"/groups/getGroupList",headers:{Authorization:window.getCookie("very")}})},f=function(t){return p.request({url:"/groups/submitGroupList",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},g=function(){return p.request({url:"/groups/getGroup",headers:{Authorization:window.getCookie("very")}})},b=function(){return p.request({url:"/home/getData",headers:{Authorization:window.getCookie("very")}})},w=function(t){return p.request({url:"/warehouse/createItem",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},v=function(t){return p.request({url:"/warehouse/updateItem",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},k=function(t){return p.request({url:"/warehouse/deleteItem",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},y=function(t){return p.request({url:"/warehouse/stock-in",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},D=function(t){return p.request({url:"/warehouse/stock-out",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},$=function(t){return p.request({url:"/stock-record/get-list-by-date",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},S=function(){return p.request({url:"/stock-record/get-list-by-latest?drange=7",method:"get",headers:{Authorization:window.getCookie("very")}})}},3019:function(t,e,o){"use strict";o.d(e,{Z:function(){return i}});o(7941),o(2526),o(7327),o(1539),o(5003),o(4747),o(9337);function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function a(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function i(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?a(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}}}]);
//# sourceMappingURL=888-legacy.ecf4b057.js.map