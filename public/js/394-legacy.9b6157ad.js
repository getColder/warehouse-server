(self["webpackChunkwarehouse_manage"]=self["webpackChunkwarehouse_manage"]||[]).push([[394],{8968:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return S}});var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"manager"},[o("el-dialog",{attrs:{visible:t.confirmDeleteShow,center:"true"},on:{"update:visible":function(e){t.confirmDeleteShow=e}}},[o("div",{attrs:{slot:"title"},slot:"title"},[t._v("警告")]),o("span",{staticStyle:{"font-size":"1.4rem"}},[t._v("项目删除后不可恢复! 你确认要删除吗？")]),o("transition",{attrs:{name:"el-zoom-in-top"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.editNoteShow,expression:"editNoteShow"}],staticClass:"transition-box"},[o("el-input",{attrs:{type:"textarea",placeholder:"此处添加备注..."},model:{value:t.operateForm.note,callback:function(e){t.$set(t.operateForm,"note",e)},expression:"operateForm.note"}})],1)]),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{disabled:t.submitting,circle:"",icon:"el-icon-edit"},on:{click:function(e){t.editNoteShow=!t.editNoteShow}}}),o("div",[o("el-button",{attrs:{disabled:t.submitting},on:{click:t.cancel}},[t._v("取消")]),o("el-button",{attrs:{type:"danger",disabled:t.submitting},on:{click:t.confirm}},[t._v("确认")])],1)],1)],1),o("el-dialog",{attrs:{title:"库存管理",visible:t.stockShow,center:"true"},on:{"update:visible":function(e){t.stockShow=e}}},[o("div",{staticStyle:{"font-size":"1.2rem",margin:"auto","text-align":"center"}},[t._v(" "+t._s("stockin"===t.operateType?"入库":"出库")+"数量： "),o("el-input-number",{attrs:{min:1,step:this.factor+1+2*this.factor,"controls-position":"right"},model:{value:t.stockMount,callback:function(e){t.stockMount=e},expression:"stockMount"}}),o("transition",{attrs:{name:"el-zoom-in-top"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.editNoteShow,expression:"editNoteShow"}],staticClass:"transition-box"},[o("el-input",{attrs:{type:"textarea",placeholder:"此处添加备注..."},model:{value:t.operateForm.note,callback:function(e){t.$set(t.operateForm,"note",e)},expression:"operateForm.note"}})],1)])],1),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{disabled:t.submitting,circle:"",icon:"el-icon-edit"},on:{click:function(e){t.editNoteShow=!t.editNoteShow}}}),o("div",[o("el-button",{attrs:{disabled:t.submitting},on:{click:t.cancel}},[t._v("取消")]),o("el-button",{attrs:{type:"primary",disabled:t.submitting},on:{click:t.confirm}},[t._v("确认")])],1)],1)]),o("el-dialog",{attrs:{title:"add"===t.operateType?"新增项目":"更改项目",visible:t.isShow,center:"true"},on:{"update:visible":function(e){t.isShow=e}}},[o("common-form",{ref:"form",attrs:{formLabel:t.operateFormLabel,form:t.operateForm,inline:!0}}),o("transition",{attrs:{name:"el-zoom-in-top"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.editNoteShow,expression:"editNoteShow"}],staticClass:"transition-box"},[o("el-input",{attrs:{type:"textarea",placeholder:"此处添加备注..."},model:{value:t.operateForm.note,callback:function(e){t.$set(t.operateForm,"note",e)},expression:"operateForm.note"}})],1)]),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{disabled:t.submitting,circle:"",icon:"el-icon-edit"},on:{click:function(e){t.editNoteShow=!t.editNoteShow}}}),o("div",[o("el-button",{attrs:{disabled:t.submitting},on:{click:t.cancel}},[t._v("取消")]),o("el-button",{attrs:{type:"primary",disabled:t.submitting},on:{click:t.confirm}},[t._v("确认")])],1)],1)],1),o("el-dialog",{attrs:{title:"分组命名",visible:t.groupShow,center:"true"},on:{"update:visible":function(e){t.groupShow=e}}},[o("common-form",{ref:"form",attrs:{formLabel:t.editGroupFormLabel,form:t.groupForm,inline:!0}}),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("div",[o("div",[o("div",[o("el-button",{attrs:{disabled:t.submitting},on:{click:t.cancel}},[t._v("取消")]),o("el-button",{attrs:{type:"primary",disabled:t.submitting},on:{click:t.confirm}},[t._v("确认")])],1)])])])],1),o("div",{staticClass:"manager-header"},[o("div",[o("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{disabled:t.submitting,type:"success",size:"medium",icon:"el-icon-plus"},on:{click:t.addItemDialog}},[t._v("新增项目")]),o("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{disabled:t.submitting,type:"primary",size:"medium",icon:"el-icon-paperclip"},on:{click:t.groupEditDialog}},[t._v("分组命名")])],1),o("common-form",{ref:"form",attrs:{formLabel:t.formLabel,form:t.searchForm,inline:!0}},[o("el-button",{attrs:{type:"primary"},on:{click:t.getList}},[t._v("搜索")])],1)],1),o("common-table",{directives:[{name:"loading",rawName:"v-loading",value:t.submitting,expression:"submitting"}],attrs:{tableData:t.tableData.filter((function(e){return t.filterRegx.test(e.name)})),tableLabel:t.tableLabel,config:t.config},on:{changePage:function(e){return t.getList()},edit:t.editItemDialog,delete:t.deleteDialog,stockin:t.stockinDialog,stockout:t.stockoutDialog}})],1)},i=[],n=(o(8309),o(4603),o(8450),o(4916),o(8386),o(9714),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form",{ref:"form",attrs:{"label-width":"100px",model:t.localForm,inline:t.inline}},[t._l(t.formLabel,(function(e){return o("el-form-item",{key:e.label,attrs:{label:e.label}},["input"===e.type?o("el-input",{attrs:{placeholder:"请输入"+e.label},model:{value:t.localForm[e.model],callback:function(o){t.$set(t.localForm,e.model,o)},expression:"localForm[item.model]"}}):t._e(),"select"===e.type?o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.localForm[e.model],callback:function(o){t.$set(t.localForm,e.model,o)},expression:"localForm[item.model]"}},t._l(e.opts,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e()],1)})),o("el-form-item",[t._t("default")],2)],2)}),a=[],s={name:"commonForm",props:{formLabel:Array,form:Object,inline:Boolean},data:function(){return{localForm:this.form}},watch:{form:function(t){this.localForm=t}}},l=s,u=o(1001),c=(0,u.Z)(l,n,a,!1,null,null,null),m=c.exports,p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"common-table"},[o("el-card",{staticClass:"table-view"},[o("el-table",{staticClass:"table-body-view",attrs:{data:t.localTableData,height:"60vh",stripe:"",fit:"","row-key":""}},[t._l(t.tableLabel,(function(e){return o("el-table-column",{key:e.prop,attrs:{"show-overflow-tooltip":"",label:e.label,width:e.width?e.width:125,"header-align":"center",align:"center",sortable:"true"},scopedSlots:t._u([{key:"default",fn:function(r){return[o("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(r.row[e.prop]))])]}}],null,!0)})})),o("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.handleEdit(e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.row)}}},[t._v("删除")]),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleStockin(e.row)}}},[t._v("入库")]),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleStockOut(e.row)}}},[t._v("出库")])]}}])})],2),o("el-pagination",{staticClass:"pager",attrs:{layout:"prev, pager, next",total:t.localConfig.total,"current-page":t.localConfig.page,"page-size":20},on:{"current-page":t.changePage}})],1)],1)},h=[],d={name:"CommonTable",data:function(){return{localConfig:this.config,localTableData:this.tableData}},props:{tableData:Array,tableLabel:Array,config:Object},methods:{handleEdit:function(t){this.$emit("edit",t)},handleDelete:function(t){this.$emit("delete",t)},handleStockin:function(t){this.$emit("stockin",t)},handleStockOut:function(t){this.$emit("stockout",t)},changePage:function(t){this.$emit("changePage",t)}},watch:{tableData:function(t){this.localTableData=t}}},f=d,g=(0,u.Z)(f,p,h,!1,null,null,null),b=g.exports,w=o(609),v={name:"warehouse",components:{CommonForm:m,CommonTable:b},data:function(){return{operateType:"add",operateRow:[],stockMount:1,isShow:!1,confirmDeleteShow:!1,stockShow:!1,groupShow:!1,editNoteShow:!1,editGroupFormLabel:[{model:"group1",label:"组一",type:"input"},{model:"group2",label:"组二",type:"input"},{model:"group3",label:"组三",type:"input"},{model:"group4",label:"组四",type:"input"}],operateForm:{name:"",number:"",pcs:"",group:"",note:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""},tableLabel:[{prop:"name",label:"项目名称",width:"250"},{prop:"number",label:"存量",width:"150"},{prop:"pcs",label:"单位",width:"150"},{prop:"group",label:"分组",width:"250"}],groupForm:{group1:"X",group2:"Y",group3:"Z",group4:"U"},tableData:[{name:"物品1",number:50,pcs:"个",group:"组1"}],config:{page:1,total:20}}},methods:{confirm:function(){"add"===this.operateType?this.create():"edit"===this.operateType?this.edit(this.operateRow):"delete"===this.operateType?this.remove(this.operateRow):"stockin"===this.operateType?this.stockin(this.operateRow,this.stockMountInt):"stockout"===this.operateType?this.stockout(this.operateRow,this.stockMountInt):"groupEdit"===this.operateType&&this.editGroupList(),this.$store.commit("submit"),this.isShow=!1,this.groupShow=!1,this.stockShow=!1,this.confirmDeleteShow=!1,this.editNoteShow=!1},cancel:function(){this.editNoteShow=!1,this.stockShow=!1,this.isShow=!1,this.groupShow=!1,this.confirmDeleteShow=!1},addItemDialog:function(){this.operateForm.note="",this.isShow=!0,this.operateType="add"},groupEditDialog:function(){this.groupShow=!0,this.operateType="groupEdit"},stockinDialog:function(t){this.operateForm.note="",this.operateRow=t,this.operateType="stockin",this.stockShow=!0},stockoutDialog:function(t){this.operateForm.note="",this.operateRow=t,this.operateType="stockout",this.stockShow=!0},editItemDialog:function(t){this.operateForm.note="",this.operateRow=t,this.operateForm={name:this.operateRow.name,number:this.operateRow.number,pcs:this.operateRow.pcs,group:this.operateRow.group,note:this.operateForm.note},this.isShow=!0,this.operateType="edit"},deleteDialog:function(t){this.operateForm.note="",this.operateRow=t,this.confirmDeleteShow=!0,this.operateType="delete"},create:function(){var t=this;(0,w.fC)(this.operateForm).then((function(e){var o=e.data,r=o.code,i=o.data;2e4===r?(t.$message.success("添加成功！"),t.tableData=i.tableData):20001===r?t.$message.warning("项目已存在!"):t.$message.error("添加失败！"),t.$store.commit("finish")})).catch((function(e){t.$store.commit("finish"),t.$message.error("添加失败！"),console.log(e,"错误")}))},edit:function(t){var e=this;this.operateForm.oldName=t.name,(0,w.$G)(this.operateForm).then((function(t){var o=t.data,r=o.code,i=o.data;2e4===r?(e.$message.success("修改成功！"),e.tableData=i.tableData):20001===r?e.$message.warning("项目不存在!"):e.$message.error("修改失败！"),e.$store.commit("finish")})).catch((function(t){e.$store.commit("finish"),e.$message.error("修改失败！"),console.log(t,"错误")}))},remove:function(t){var e=this,o=this.operateForm.note;(0,w.wz)({name:t.name,note:o}).then((function(t){var o=t.data,r=o.code,i=o.data;2e4===r?(e.$message.success("删除成功！"),e.tableData=i.tableData):20001===r?e.$message.warning("项目不存在!"):e.$message.error("删除失败！"),e.$store.commit("finish")})).catch((function(t){e.$store.commit("finish"),e.$message.error("删除失败！"),console.log(t,"错误")}))},stockin:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.operateForm.note;(0,w.QG)({name:t.name,mount:o,note:r}).then((function(t){var o=t.data,r=o.code,i=o.data;2e4===r?(e.$message.success("入库成功！"),e.tableData=i.tableData):20001===r?(e.$message.warning("项目不存在! "),e.tableData=i.tableData):e.$message.error("入库失败！"),e.$store.commit("finish")})).catch((function(t){e.$store.commit("finish"),e.$message.error("入库失败！"),console.log(t,"错误")}))},stockout:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.operateForm.note;(0,w.tR)({name:t.name,mount:o,note:r}).then((function(t){var o=t.data,r=o.code,i=o.data;2e4===r?(e.$message.success("出库成功！"),e.tableData=i.tableData):20001===r?e.$message.warning("项目不存在 "):20002===r?e.$message.warning("库存不足!"):e.$message.error("出库失败！"),e.$store.commit("finish")})).catch((function(t){e.$store.commit("finish"),e.$message.error("出库失败！"),console.log(t,"错误")}))},editGroupList:function(){var t=this;(0,w.Co)(this.groupForm).then((function(e){var o=e.data,r=o.code,i=o.data;2e4===r?(t.groupForm=i,t.$message.success("分组命名修改成功!"),(0,w.Yu)().then((function(e){var o=e.data,r=o.data,i=o.code;2e4===i&&(t.tableData=r.tableData)}))):t.$message.warning("分组命名修改失败!"),t.$store.commit("finish")})).catch((function(e){t.$store.commit("finish"),t.$message.warning("分组命名修改失败!")}))}},mounted:function(){var t=this;(0,w.Yu)().then((function(e){var o=e.data,r=o.data,i=o.code;2e4===i&&(t.tableData=r.tableData)})),(0,w.hI)().then((function(e){var o=e.data,r=o.data,i=o.code;2e4===i&&(t.groupForm=r.groupData)}))},computed:{factor:function(){return Math.ceil(this.stockMount/50)-1},stockMountInt:function(){return"number"!==typeof this.stockMount?0:Math.floor(this.stockMount)},groupLabel:function(){return this.$store.state.groups.groupsInfo},operateFormLabel:function(){return[{model:"name",label:"项目名称",type:"input"},{model:"number",label:"数量",type:"input"},{model:"pcs",label:"计量单位",type:"input"},{model:"group",label:"分组",type:"select",opts:[{label:this.groupLabel[0].group,value:this.groupLabel[0].group},{label:this.groupLabel[1].group,value:this.groupLabel[1].group},{label:this.groupLabel[2].group,value:this.groupLabel[2].group},{label:this.groupLabel[3].group,value:this.groupLabel[3].group}]}]},submitting:function(){return this.$store.state.form.submitting},filterRegx:function(){return new RegExp("".concat(""===this.searchForm.keyword?".":this.searchForm.keyword),"gi")}}},y=v,k=(0,u.Z)(y,r,i,!1,null,"755e94d0",null),S=k.exports},9337:function(t,e,o){var r=o(2109),i=o(9781),n=o(3887),a=o(5656),s=o(1236),l=o(6135);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,o,r=a(t),i=s.f,u=n(r),c={},m=0;while(u.length>m)o=i(r,e=u[m++]),void 0!==o&&l(c,e,o);return c}})},609:function(t,e,o){"use strict";o.d(e,{fC:function(){return w},wz:function(){return y},Yu:function(){return b},ex:function(){return g},hI:function(){return d},r7:function(){return h},tM:function(){return $},g5:function(){return D},QG:function(){return k},tR:function(){return S},Co:function(){return f},$G:function(){return v}});var r=o(3019);o(1703);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}o(1539);var s=o(6166),l=o.n(s),u={baseUrl:{dev:"/api/",pro:""}},c=u.baseUrl.pro,m=function(){function t(e){i(this,t),this.baseUrl=e}return a(t,[{key:"getInsideConfig",value:function(){var t={baseUrl:this.baseUrl};return t}},{key:"interceptors",value:function(t){t.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),t.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)}))}},{key:"request",value:function(t){var e=l().create();return t=(0,r.Z)((0,r.Z)({},this.getInsideConfig()),t),this.interceptors(e),e(t)}}]),t}(),p=new m(c),h=function(t){return p.request({url:"/permission/getMenu",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},d=function(){return p.request({url:"/groups/getGroupList",headers:{Authorization:window.getCookie("very")}})},f=function(t){return p.request({url:"/groups/submitGroupList",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},g=function(){return p.request({url:"/groups/getGroup",headers:{Authorization:window.getCookie("very")}})},b=function(){return p.request({url:"/home/getData",headers:{Authorization:window.getCookie("very")}})},w=function(t){return p.request({url:"/warehouse/createItem",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},v=function(t){return p.request({url:"/warehouse/updateItem",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},y=function(t){return p.request({url:"/warehouse/deleteItem",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},k=function(t){return p.request({url:"/warehouse/stock-in",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},S=function(t){return p.request({url:"/warehouse/stock-out",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},$=function(t){return p.request({url:"/stock-record/get-list-by-date",method:"post",data:t,headers:{Authorization:window.getCookie("very")}})},D=function(){return p.request({url:"/stock-record/get-list-by-latest?drange=7",method:"get",headers:{Authorization:window.getCookie("very")}})}},3019:function(t,e,o){"use strict";o.d(e,{Z:function(){return n}});o(7941),o(2526),o(7327),o(1539),o(5003),o(4747),o(9337);function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function n(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}}}]);
//# sourceMappingURL=394-legacy.9b6157ad.js.map