"use strict";(self["webpackChunkwarehouse_manage"]=self["webpackChunkwarehouse_manage"]||[]).push([[186],{1186:function(e,t,o){o.r(t),o.d(t,{default:function(){return $}});var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"manager"},[o("el-dialog",{attrs:{title:"add"===e.operateType?"新增项目":"更改项目",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t}}},[o("common-form",{ref:"form",attrs:{formLabel:e.operateFormLabel,form:e.operateForm,inline:!0}}),o("div",{staticClass:"dialog-foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.isShow=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")])],1)],1),o("div",{staticClass:"manager-header"},[o("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"success",size:"mini"},on:{click:e.addItemDialog}},[e._v("新增项目")]),o("common-form",{ref:"form",attrs:{formLabel:e.formLabel,form:e.searchForm,inline:!0}},[o("el-button",{attrs:{type:"primary"},on:{click:e.getList}},[e._v("搜索")])],1)],1),o("common-table",{attrs:{tableData:e.tableData,tableLabel:e.tableLabel,config:e.config},on:{changePage:function(t){return e.getList()},edit:function(t){return e.editItemDialog(e.row)},delete:function(t){return e.remove(e.row)},stockin:function(t){return e.stockin(e.row)},stockout:function(t){return e.stockout(e.row)}}})],1)},r=[],s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",attrs:{"label-width":"100px",model:e.form,inline:e.inline}},[e._l(e.formLabel,(function(t){return o("el-form-item",{key:t.label,attrs:{label:t.label}},["input"===t.type?o("el-input",{attrs:{placeholder:"请输入"+t.label},model:{value:e.form[t.model],callback:function(o){e.$set(e.form,t.model,o)},expression:"form[item.model]"}}):e._e(),"switch"===t.type?o("el-switch",{model:{value:e.form[t.model],callback:function(o){e.$set(e.form,t.model,o)},expression:"form[item.model]"}}):e._e(),"select"===t.type?o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form[t.model],callback:function(o){e.$set(e.form,t.model,o)},expression:"form[item.model]"}},e._l(t.opts,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1)})),o("el-form-item",[e._t("default")],2)],2)},l=[],n={name:"commonForm",props:{formLabel:Array,form:Object,inline:Boolean},data(){return{}}},i=n,c=o(1001),m=(0,c.Z)(i,s,l,!1,null,null,null),u=m.exports,d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"common-table"},[o("el-card",{staticClass:"table-view"},[o("el-table",{staticClass:"table-body-view",attrs:{data:e.tableData,height:"90%",stripe:""}},[e._l(e.tableLabel,(function(t){return o("el-table-column",{key:t.prop,attrs:{"show-overflow-tooltip":"",label:t.label,width:t.width?t.width:125,"header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row[t.prop]))])]}}],null,!0)})})),o("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center","min-width":"180"}},[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleEdit}},[e._v("编辑")]),o("el-button",{attrs:{size:"mini",type:"warning"},on:{click:e.handleDelete}},[e._v("删除")]),o("el-button",{attrs:{size:"mini"},on:{click:e.handleStockin}},[e._v("入库")]),o("el-button",{attrs:{size:"mini"},on:{click:e.handleStockOut}},[e._v("出库")])],1)],2),o("el-pagination",{staticClass:"pager",attrs:{layout:"prev, pager, next",total:e.config.total,"current-page":e.config.page,"page-size":20},on:{"update:currentPage":function(t){return e.$set(e.config,"page",t)},"update:current-page":function(t){return e.$set(e.config,"page",t)},"current-page":e.changePage}})],1)],1)},h=[],p={name:"CommonTable",data(){return{}},props:{tableData:Array,tableLabel:Array,config:Object},methods:{handleEdit(e){this.$emit("edit",e)},handleDelete(e){this.$emit("delete",e)},handleStockin(e){this.$emit("stockin",e)},handleStockOut(e){this.$emit("stockout",e)},changePage(e){this.$emit("changePage",e)}}},g=p,f=(0,c.Z)(g,d,h,!1,null,null,null),b=f.exports,w=o(7303),v={name:"warehouse",components:{CommonForm:u,CommonTable:b},data(){return{operateType:"add",isShow:!1,operateFormLabel:[{model:"name",label:"项目名称",type:"input"},{model:"number",label:"数量",type:"input"},{model:"pcs",label:"计量单位",type:"input"},{model:"group",label:"分组",type:"select",opts:[{label:"分组1",value:"g1"},{label:"分组2",value:"g2"}]}],operateForm:{name:"",number:"",psc:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""},tableLabel:[{prop:"item",label:"项目名称",width:"250"},{prop:"number",label:"存量",width:"150"},{prop:"pcs",label:"单位",width:"150"},{prop:"group",label:"分组",width:"250"}],tableData:Array(40).fill({item:"物品1",number:"5",pcs:"个",group:"分组1"}),config:{page:1,total:20}}},methods:{confirm(){"add"===this.operateType?this.create():"edit"===this.operateType&&this.edit()},addItemDialog(){this.isShow=!0,this.operateType="add"},editItemDialog(e){this.isShow=!0,this.operateType="edit"},create(e){(0,w.fC)(this.operateForm).then((e=>{const{code:t,data:o}=e.data;2e4===t?this.$message.success("添加成功！"):20001===t?this.$message.warning("项目已存在!"):this.$message.error("添加失败！")})).catch((e=>{this.$message.error("添加失败！"),console.log(e,"错误")}))},edit(e){(0,w.$G)(this.operateForm).then((e=>{const{code:t,data:o}=e.data;2e4===t?this.$message.success("修改成功！"):20001===t?this.$message.warning("项目不存在!"):this.$message.error("修改失败！")})).catch((e=>{this.$message.error("修改失败！"),console.log(e,"错误")}))},remove(e){console.log(e),(0,w.wz)(e).then((e=>{const{code:t,data:o}=e.data;2e4===t?this.$message.success("删除成功！"):20001===t?this.$message.warning("项目不存在!删除失败！"):this.$message.error("删除失败！")})).catch((e=>{this.$message.error("删除失败！"),console.log(e,"错误")}))},stockin(e){console.log(e),(0,w.QG)(e).then((e=>{const{code:t,data:o}=e.data;2e4===t?this.$message.success("入库成功！"):20001===t?this.$message.warning("入库失败 "):this.$message.error("入库失败！")})).catch((e=>{this.$message.error("入库失败！"),console.log(e,"错误")}))},stockout(e){console.log(e),(0,w.tR)(e).then((e=>{const{code:t,data:o}=e.data;2e4===t?this.$message.success("出库成功！"):20001===t?this.$message.warning("出库失败！库存不足！ "):this.$message.error("出库失败！")})).catch((e=>{this.$message.error("出库失败！"),console.log(e,"错误")}))}}},y=v,k=(0,c.Z)(y,a,r,!1,null,null,null),$=k.exports},7303:function(e,t,o){o.d(t,{fC:function(){return u},wz:function(){return h},Yu:function(){return m},r7:function(){return c},QG:function(){return p},tR:function(){return g},$G:function(){return d}});var a=o(6166),r=o.n(a),s={baseUrl:{dev:"/api/",pro:""}};const l=s.baseUrl.pro;class n{constructor(e){this.baseUrl=e}getInsideConfig(){const e={baseUrl:this.baseUrl};return e}interceptors(e){e.interceptors.request.use((e=>e),(e=>Promise.reject(e))),e.interceptors.response.use((e=>e),(e=>Promise.reject(e)))}request(e){const t=r().create();return e={...this.getInsideConfig(),...e},this.interceptors(t),t(e)}}var i=new n(l);const c=e=>i.request({url:"/permission/getMenu",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}}),m=()=>i.request({url:"/home/getData",headers:{Authorization:localStorage.getItem("very")}}),u=e=>i.request({url:"/warehouse/createItem",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}}),d=e=>i.request({url:"/warehouse/updateItem",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}}),h=e=>i.request({url:"/warehouse/deleteItem",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}}),p=e=>i.request({url:"/warehouse/stock-in",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}}),g=e=>i.request({url:"/warehouse/stock-out",method:"post",data:e,headers:{Authorization:localStorage.getItem("very")}})}}]);
//# sourceMappingURL=186.9c86d922.js.map